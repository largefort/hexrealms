var gdjs;(function(h){const u=new h.Logger("Model3DManager");class E{constructor(r,o){this._loadedThreeModels=new Map;this._loader=null;this._invalidModel=null;if(this._resources=r,this._resourcesLoader=o,typeof THREE!="undefined"){this._loader=new THREE_ADDONS.GLTFLoader;const a=new THREE.BoxGeometry(1,1,1),e=new THREE.MeshBasicMaterial({color:"#ff00ff"});this._invalidModel=new THREE.Mesh(a,e)}}setResources(r){this._resources=r}loadModels(r,o){const e=this._resources.filter(function(t){return t.kind==="model3D"});if(e.length===0||!this._loader)return o(e.length);let s=0;for(let t=0;t<e.length;++t){const i=e[t],d=this._resourcesLoader.getFullUrl(i.file);this._loader.withCredentials=this._resourcesLoader.checkIfCredentialsRequired(d),this._loader.load(d,l=>{l.scene.traverse(c=>{if(c.isMesh){const n=c.material.map;n&&n.isTexture&&(n.encoding=THREE.LinearEncoding)}}),l.scene.rotation.order="ZYX",this._loadedThreeModels.set(i.name,l.scene),s++,s===e.length?o(e.length):r(s,e.length)},void 0,l=>{u.error(l),s++,s===e.length?o(e.length):r(s,e.length)})}}getModel(r){return this._loadedThreeModels.get(r)||this._invalidModel}}h.Model3DManager=E})(gdjs||(gdjs={}));
//# sourceMappingURL=Model3DManager.js.map
